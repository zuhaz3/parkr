function sendDataController(){$("#address").val()&&$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address="+$("#address").val()+"&sensor=true",function(e){lat_lng={lat:e.results[0].geometry.location.lat,lng:e.results[0].geometry.location.lng};loadFirebase()})}function loadFirebase(){origin1=new google.maps.LatLng(lat_lng.lat,lat_lng.lng);calculateDistances();console.log(counterVal);if(zone!=0){var e=JSON.stringify({zone:zone,name:$("#name").val(),phone:$("#phone").val(),email:$("#email").val(),address:$("#address").val(),count:counterVal,status:!1}),t=new Firebase("https://parkr.firebaseio.com/"+counterVal);t.child("entry").set(e);var n=counterVal+1;counterRef.set(n)}}function initialize(){var e=document.getElementById("address"),t=new google.maps.places.Autocomplete(e),n={center:new google.maps.LatLng(37.76904,-122.4835193),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map-canvas"),n);geocoder=new google.maps.Geocoder;google.maps.event.trigger(map,"resize")}function calculateDistances(){var e=new google.maps.DistanceMatrixService;e.getDistanceMatrix({origins:[origin1],destinations:[destinationA],travelMode:google.maps.TravelMode.WALKING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},callback)}function callback(e,t){if(t!=google.maps.DistanceMatrixStatus.OK)alert("Error was: "+t);else{var n=e.originAddresses,r=e.destinationAddresses,i=document.getElementById("outputDiv");i.innerHTML="";deleteOverlays();for(var s=0;s<n.length;s++){var o=e.rows[s].elements;addMarker(n[s],!1);for(var u=0;u<o.length;u++){addMarker(r[u],!0);if(o[u].distance==undefined){i.innerHTML="Sorry, you are not eligible for this!";zone=0}else if(parseInt(o[u].distance.text)>1){console.log("Too far");zone=0}else{i.innerHTML+=o[u].distance.text+" "+o[u].duration.text;zone=1}}}}}function addMarker(e,t){geocoder.geocode({address:e},function(e,t){if(t==google.maps.GeocoderStatus.OK){bounds.extend(e[0].geometry.location);map.fitBounds(bounds);var n=new google.maps.Marker({map:map,position:e[0].geometry.location});markersArray.push(n)}else alert("Geocode was not successful for the following reason: "+t)})}function deleteOverlays(){for(var e=0;e<markersArray.length;e++)markersArray[e].setMap(null);markersArray=[]}google.maps.visualRefresh=!0;var map,geocoder,bounds=new google.maps.LatLngBounds,markersArray=[],origin1=new google.maps.LatLng(37.76904,-122.4835193),destinationA=new google.maps.LatLng(37.76904,-122.4835193),lat_lng=new google.maps.LatLng(37.76904,-122.4835193),zone,counterVal,counterRef=new Firebase("http://parkr.firebaseio.com/counter");counterRef.on("value",function(e){counterVal=e.val()});google.maps.event.addDomListener(window,"load",initialize);